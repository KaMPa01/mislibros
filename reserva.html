<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reserva - YO ANTES Y DESPUÉS DE TI</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family: 'Inter', sans-serif; background-color: #F0F8FF; }
.header-title { color: #FF1493; }
.header-subtitle, .form-label, h3 { color: #2D3945; }
.form-input { border-color: #D1D5DB; transition: border-color 0.2s, box-shadow 0.2s; }
.form-input:focus { border-color: #FF7F50; outline: none; }
.submit-btn { background-color: #FF1493; transition: background-color 0.2s; }
.submit-btn:hover { background-color: #c71585; }
.modal-bg { display: none; position: fixed; inset:0; background: rgba(0,0,0,0.6); z-index:50; justify-content: center; align-items:center; }
.modal-content { background:white; padding:1rem; border-radius:0.5rem; max-width:600px; width:90%; height:80%; display:flex; flex-direction: column; }
.modal-iframe { flex:1; border:none; }
</style>
</head>
<body>
<div class="container mx-auto p-4 md:p-8 max-w-3xl">
    <header class="text-center mb-8">
        <h1 class="text-4xl font-bold header-title">Preventa</h1>
        <p class="text-lg header-subtitle mt-2">"YO ANTES Y DESPUÉS DE TI"</p>
    </header>

    <div class="bg-white p-6 md:p-10 rounded-lg shadow-lg">
        <form id="reserva-form">
            <div class="mb-4">
                <label for="nombre_apellido" class="form-label block mb-2">Nombre y Apellido *</label>
                <input type="text" id="nombre_apellido" name="nombre_apellido" required class="form-input w-full p-2 border rounded-md">
            </div>

            <div class="mb-4">
                <label class="form-label block mb-2">Método de Envío *</label>
                <select id="metodo_envio" name="metodo_envio" required class="form-input w-full p-2 border rounded-md">
                    <option value="">Selecciona una opción...</option>
                    <option value="Correos">Correos (Envío a domicilio)</option>
                    <option value="Inpost">Inpost (Punto de recogida)</option>
                </select>
            </div>

            <!-- Campo InPost -->
            <div id="punto-inpost" class="mt-6 border-t pt-6 hidden">
                <h3 class="text-xl font-bold mb-4">Punto de Recogida (InPost)</h3>
                <p class="text-sm text-gray-700 mb-2">Selecciona tu punto de recogida en el mapa:</p>
                <button type="button" id="abrir-mapa" class="submit-btn text-white font-bold py-2 px-4 rounded-md mb-2">Seleccionar punto en el mapa</button>
                <input type="text" id="inpost_point" name="inpost_point" required class="form-input w-full p-2 border rounded-md mt-2" placeholder="Tu punto de InPost seleccionado">
            </div>

            <div class="mt-8 text-center">
                <button type="submit" class="submit-btn text-white font-bold py-3 px-8 rounded-lg">Confirmar Reserva</button>
            </div>
        </form>
    </div>
</div>

<!-- Modal del mapa -->
<div id="modal-mapa" class="modal-bg flex">
    <div class="modal-content">
        <iframe src="https://www.inpost.es/buscar-el-punto-pack-mas-cercano/" class="modal-iframe"></iframe>
        <button id="seleccionar-punto" class="submit-btn text-white font-bold py-2 px-4 mt-2 rounded-md">Usar este punto</button>
        <button id="cerrar-mapa" class="submit-btn text-white font-bold py-2 px-4 mt-2 rounded-md bg-gray-500 hover:bg-gray-700">Cerrar</button>
    </div>
</div>

<script>
const metodoEnvio = document.getElementById('metodo_envio');
const puntoInpost = document.getElementById('punto-inpost');
const modalMapa = document.getElementById('modal-mapa');
const abrirMapaBtn = document.getElementById('abrir-mapa');
const cerrarMapaBtn = document.getElementById('cerrar-mapa');
const seleccionarPuntoBtn = document.getElementById('seleccionar-punto');
const inputInpost = document.getElementById('inpost_point');

// Mostrar/ocultar campo InPost según método de envío
metodoEnvio.addEventListener('change', () => {
    puntoInpost.classList.toggle('hidden', metodoEnvio.value !== 'Inpost');
    inputInpost.required = metodoEnvio.value === 'Inpost';
});

// Abrir modal
abrirMapaBtn.addEventListener('click', () => {
    modalMapa.style.display = 'flex';
});

// Cerrar modal
cerrarMapaBtn.addEventListener('click', () => {
    modalMapa.style.display = 'none';
});

// Botón "Usar este punto" simula la selección
seleccionarPuntoBtn.addEventListener('click', () => {
    // Aquí puedes capturar manualmente la dirección que el usuario ve en el iframe
    // Como no hay integración directa, pedimos que escriba algo o se podría hacer un prompt
    const direccion = prompt("Ingresa la dirección del punto que deseas seleccionar:");
    if(direccion) {
        inputInpost.value = direccion;
        modalMapa.style.display = 'none';
    }
});
</script>
</body>
</html>
